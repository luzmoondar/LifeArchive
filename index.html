<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏÇ∂Í∏∞Î°ùÏÜå</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6366f1">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">
</head>

<body>
    <div class="app-container">
        <!-- New Header Area -->
        <div class="app-title-bar">
            <h1>Life Archive</h1>
            <div class="title-bar-actions">
                <button id="btn-reset-all" class="reset-btn" style="display: none;">Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî</button>
                <button id="btn-logout" class="logout-btn" style="display: none;">Î°úÍ∑∏ÏïÑÏõÉ</button>
            </div>
        </div>

        <div class="app-body">
            <header class="main-header">
                <nav class="tab-nav">
                    <button class="tab-btn active" data-tab="stats">Ï†ÑÏ≤¥ÌÜµÍ≥Ñ</button>
                    <button class="tab-btn" data-tab="account">Í∞ÄÍ≥ÑÎ∂Ä</button>
                    <button class="tab-btn" data-tab="detail">ÏÉÅÏÑ∏Í∞ÄÍ≥ÑÎ∂Ä</button>
                    <button class="tab-btn" data-tab="monthly">ÏÉùÌôúÎ®ºÏä¨Î¶¨</button>
                    <button class="tab-btn" data-tab="wedding">Ï∂ïÏùòÍ∏à</button>
                </nav>
            </header>

            <main class="content-area">
                <!-- ... existing tabs ... -->

                <!-- Detailed Account Tab -->
                <section id="detail" class="tab-content">
                    <div class="detail-card">
                        <!-- Ïó∞Ïõî ÎÑ§ÎπÑÍ≤åÏù¥ÌÑ∞ -->
                        <div class="detail-month-nav">
                            <button id="detail-prev-month" class="month-nav-btn">&#8249;</button>
                            <span id="detail-month-label" class="month-nav-label">2026ÎÖÑ 02Ïõî</span>
                            <button id="detail-next-month" class="month-nav-btn">&#8250;</button>
                        </div>

                        <div class="detail-grid">
                            <div class="section-card">
                                <div class="section-header">
                                    <div class="title-with-budget">
                                        <h4>Í∞úÏù∏ÏÜåÎπÑ</h4>
                                        <div class="budget-input-group">
                                            <label>Î™©ÌëúÏòàÏÇ∞:</label>
                                            <input type="number" id="personal-budget" placeholder="0">
                                            <span>Ïõê</span>
                                        </div>
                                    </div>
                                    <button class="add-btn" id="add-personal-row">+</button>
                                </div>
                                <div class="table-responsive">
                                    <table class="detail-table" id="personal-detail-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 40px;">No.</th>
                                                <th>ÎÇ¥Ïö©</th>
                                                <th>Í∏àÏï°</th>
                                                <th style="width: 90px;"></th>
                                            </tr>
                                        </thead>
                                        <tbody id="personal-table-body">
                                            <!-- rows added here -->
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="2" class="total-label">Ìï©Í≥Ñ</td>
                                                <td class="total-amount" id="personal-total">0Ïõê</td>
                                                <td></td>
                                            </tr>
                                            <tr class="remaining-row">
                                                <td colspan="2" class="total-label">ÎÇ®ÏùÄ Í∏àÏï°</td>
                                                <td class="remaining-amount" id="personal-remaining">0Ïõê</td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>

                            <div class="section-card">
                                <div class="section-header">
                                    <div class="title-with-budget">
                                        <h4>Í≥µÏö©ÏÜåÎπÑ</h4>
                                        <div class="budget-input-group">
                                            <label>Î™©ÌëúÏòàÏÇ∞:</label>
                                            <input type="number" id="shared-budget" placeholder="0">
                                            <span>Ïõê</span>
                                        </div>
                                    </div>
                                    <button class="add-btn" id="add-shared-row">+</button>
                                </div>
                                <div class="table-responsive">
                                    <table class="detail-table" id="shared-detail-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 40px;">No.</th>
                                                <th>ÎÇ¥Ïö©</th>
                                                <th>Í∏àÏï°</th>
                                                <th style="width: 90px;"></th>
                                            </tr>
                                        </thead>
                                        <tbody id="shared-table-body">
                                            <!-- rows added here -->
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="2" class="total-label">Ìï©Í≥Ñ</td>
                                                <td class="total-amount" id="shared-total">0Ïõê</td>
                                                <td></td>
                                            </tr>
                                            <tr class="remaining-row">
                                                <td colspan="2" class="total-label">ÎÇ®ÏùÄ Í∏àÏï°</td>
                                                <td class="remaining-amount" id="shared-remaining">0Ïõê</td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div><!-- end detail-grid -->
                </section>

                </section>
                <!-- Total Statistics Tab -->
                <section id="stats" class="tab-content active">
                    <div class="stats-layout">
                        <div class="main-stats-area">
                            <div class="summary-grid">
                                <div class="summary-card income">
                                    <h3>Ï¥ùÏàòÏûÖ</h3>
                                    <p class="amount" id="total-income">0Ïõê</p>
                                </div>
                                <div class="summary-card expense">
                                    <h3>Ï¥ùÏßÄÏ∂ú</h3>
                                    <p class="amount" id="total-expense">0Ïõê</p>
                                </div>
                                <div class="summary-card savings">
                                    <h3>Ï¥ùÏ†ÄÏ∂ï</h3>
                                    <p class="amount" id="total-savings">0Ïõê</p>
                                </div>
                                <div class="summary-card asset">
                                    <h3>Ï¥ùÎ≥¥Ïú†ÏûêÏÇ∞</h3>
                                    <p class="amount" id="total-asset-stats">0Ïõê</p>
                                </div>
                            </div>
                            <div class="charts-container">
                                <div class="chart-box">
                                    <h4>Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ ÏÜåÎπÑ %</h4>
                                    <div class="chart-wrapper">
                                        <canvas id="expense-chart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-box">
                                    <h4>Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ Ï†ÄÏ∂ï %</h4>
                                    <div class="chart-wrapper">
                                        <canvas id="savings-chart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Ïö∞Ï∏° Îπà Í≥µÍ∞ÑÏùÑ Ïú†ÏßÄÌïòÏó¨ Îã§Î•∏ ÌÉ≠Í≥º Í∞ÄÎ°ú ÎÑàÎπÑÎ•º ÎßûÏ∂•ÎãàÎã§ -->
                        <div class="details-side"></div>
                    </div>
                </section>

                <!-- Account Book Tab -->
                <section id="account" class="tab-content">
                    <div class="account-layout">
                        <div class="calendar-side">
                            <div id="account-calendar" class="calendar"></div>
                        </div>
                        <div class="details-side">
                            <div class="summary-grid monthly-summary">
                                <div class="summary-card income clickable" id="acc-income-card">
                                    <h3>Ïù¥Î≤à Îã¨ Ï¥ùÏàòÏûÖ</h3>
                                    <div class="amount" id="acc-monthly-income">0Ïõê</div>
                                </div>
                                <div class="summary-card expense">
                                    <h3>Ïù¥Î≤à Îã¨ Ï¥ùÏÜåÎπÑ</h3>
                                    <div class="amount" id="acc-monthly-expense">0Ïõê</div>
                                </div>
                                <div class="summary-card savings">
                                    <h3>Ïù¥Î≤à Îã¨ Ï¥ùÏ†ÄÏ∂ï</h3>
                                    <div class="amount" id="acc-monthly-savings">0Ïõê</div>
                                </div>
                                <div class="summary-card balance">
                                    <h3>Ïù¥Î≤à Îã¨ ÏûîÏï°</h3>
                                    <div class="amount" id="acc-monthly-balance">0Ïõê</div>
                                </div>
                                <div class="summary-card asset clickable" id="acc-asset-card">
                                    <h3>Ï¥ù Î≥¥Ïú†ÏûêÏÇ∞</h3>
                                    <div class="amount" id="acc-total-asset">0Ïõê</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="account-bottom-sections mt-4">
                        <div class="section-card">
                            <div class="section-header">
                                <h4>ÏÜåÎπÑ Ïπ¥ÌÖåÍ≥†Î¶¨</h4>
                                <button class="add-btn" id="add-expense-cat">+</button>
                            </div>
                            <div id="expense-category-grid" class="category-grid"></div>
                        </div>

                        <div class="section-card mt-4">
                            <div class="section-header">
                                <h4>Ï†ÄÏ∂ï Ïπ¥ÌÖåÍ≥†Î¶¨</h4>
                                <button class="add-btn" id="add-savings-cat">+</button>
                            </div>
                            <div id="savings-category-grid" class="category-grid"></div>
                        </div>
                    </div>
                </section>

                <!-- Life Monthly Tab -->
                <section id="monthly" class="tab-content">
                    <div class="monthly-layout">
                        <div class="calendar-side">
                            <div id="life-calendar" class="calendar"></div>
                        </div>
                        <div class="details-side">
                            <div class="section-card">
                                <div class="section-header">
                                    <h4>Ïù¥Î≤àÎã¨ Ïù¥Ïäà</h4>
                                </div>
                                <div class="todo-input">
                                    <input type="number" id="new-issue-day" placeholder="Ïùº" min="1" max="31">
                                    <input type="text" id="new-issue" placeholder="Ïù¥Ïäà ÏûÖÎ†•...">
                                    <button id="add-issue">Ï∂îÍ∞Ä</button>
                                </div>
                                <ul id="issue-list" class="todo-list"></ul>
                            </div>
                        </div>
                    </div>

                    <div class="section-card mt-4">
                        <div class="section-header">
                            <h4>Í∏∞Î°ù Ï∂îÍ∞Ä</h4>
                        </div>
                        <div class="form-group-row">
                            <input type="number" id="life-day" placeholder="Ïùº" min="1" max="31">
                            <input type="text" id="life-item" placeholder="ÎÇ¥Ïö©">
                            <input type="number" id="life-qty" placeholder="ÏàòÎüâ">
                            <input type="number" id="life-amount" placeholder="Í∏àÏï°">
                            <button id="add-life-log">Í∏∞Î°ù</button>
                        </div>
                    </div>

                    <div class="section-card mt-4">
                        <div class="section-header">
                            <h4>Î≥¥Ïú†Î™©Î°ù</h4>
                        </div>
                        <div class="table-responsive">
                            <table class="stock-table">
                                <thead>
                                    <tr>
                                        <th>ÎÇ†Ïßú</th>
                                        <th>ÎÇ¥Ïö©</th>
                                        <th>ÏàòÎüâ</th>
                                        <th>Í∏àÏï°</th>
                                        <th>Í¥ÄÎ¶¨</th>
                                    </tr>
                                </thead>
                                <tbody id="stock-list-body">
                                    <!-- Í∏∞Î°ùÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Wedding Gift Tab -->
                <section id="wedding" class="tab-content">
                    <div class="wedding-top-summary section-card mb-4" style="margin-bottom: 1.5rem;">
                        <div class="title-with-summary"
                            style="display: flex; align-items: center; justify-content: space-between;">
                            <h4 style="margin:0;">Ï∂ïÏùòÍ∏à Ï†ÑÏ≤¥ ÏöîÏïΩ</h4>
                            <div class="wedding-summary" style="font-size: 1rem; color: var(--text-light);">
                                <span>Î∞õÏùÄ Ï¥ùÏï°: <strong id="wedding-received-total"
                                        style="color: var(--primary);">0Ïõê</strong></span>
                                <span style="margin-left: 25px;">ÎÇ¥Í∞Ä ÎÇ∏ Ï¥ùÏï°: <strong id="wedding-paid-total"
                                        style="color: var(--danger);">0Ïõê</strong></span>
                            </div>
                        </div>
                    </div>

                    <div class="detail-grid">
                        <!-- Left Table (1-20) -->
                        <div class="section-card">
                            <div class="section-header">
                                <h4>Ï∂ïÏùòÍ∏à ÎÇ¥Ïó≠ (1-20)</h4>
                                <button class="add-btn" id="add-wedding-row-1">+</button>
                            </div>
                            <div class="table-responsive">
                                <table class="detail-table wedding-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 40px;">No.</th>
                                            <th>Ïù¥Î¶Ñ</th>
                                            <th>Î∞õÏùÄ Í∏àÏï°</th>
                                            <th>ÎÇ∏ Í∏àÏï°</th>
                                            <th style="width: 45px;">Ï∞∏ÏÑù</th>
                                            <th style="width: 35px;"></th>
                                        </tr>
                                    </thead>
                                    <tbody id="wedding-table-body-1"></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Right Table (21-40) -->
                        <div class="section-card">
                            <div class="section-header">
                                <h4>Ï∂ïÏùòÍ∏à ÎÇ¥Ïó≠ (21-40)</h4>
                                <button class="add-btn" id="add-wedding-row-2">+</button>
                            </div>
                            <div class="table-responsive">
                                <table class="detail-table wedding-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 40px;">No.</th>
                                            <th>Ïù¥Î¶Ñ</th>
                                            <th>Î∞õÏùÄ Í∏àÏï°</th>
                                            <th>ÎÇ∏ Í∏àÏï°</th>
                                            <th style="width: 45px;">Ï∞∏ÏÑù</th>
                                            <th style="width: 35px;"></th>
                                        </tr>
                                    </thead>
                                    <tbody id="wedding-table-body-2"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div><!-- End app-body -->


    </div>

    <!-- Data Entry Modal -->
    <div id="entry-modal" class="modal-backdrop">
        <div class="modal-content card">
            <div class="modal-header">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <h4 id="modal-title">ÎÇ¥Ïó≠ Ï∂îÍ∞Ä</h4>
                    <button id="btn-rename-cat" class="action-icon-btn" title="Ïπ¥ÌÖåÍ≥†Î¶¨Î™Ö Î≥ÄÍ≤Ω"
                        style="display: none;">‚úèÔ∏è</button>
                </div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ÎÇ†Ïßú</label>
                    <input type="date" id="modal-date">
                </div>
                <div class="form-group">
                    <label>Ìï≠Î™©Î™Ö</label>
                    <input type="text" id="modal-name" placeholder="Ìï≠Î™©Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                </div>
                <div class="form-group">
                    <label>Í∏àÏï°</label>
                    <input type="number" id="modal-amount" placeholder="Í∏àÏï°ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-entry" class="primary-btn">Ï†ÄÏû•ÌïòÍ∏∞</button>
            </div>
            <div class="modal-history">
                <h5>Í∏∞Ï°¥ ÎÇ¥Ïó≠</h5>
                <div id="modal-entry-list" class="mini-entry-list"></div>
            </div>
        </div>
    </div>

    <!-- Auth Overlay -->
    <div id="auth-overlay" class="modal-backdrop active">
        <div class="modal-content card" style="max-width: 400px; text-align: center;">
            <h2 id="auth-title" style="margin-bottom: 20px;">ÏÇ∂Í∏∞Î°ùÏÜå ÏãúÏûëÌïòÍ∏∞</h2>
            <div class="modal-body">
                <div class="form-group" style="text-align: left;">
                    <label>Ïù¥Î©îÏùº</label>
                    <input type="email" id="auth-email" placeholder="example@email.com">
                </div>
                <div class="form-group" style="text-align: left; margin-bottom: 20px;">
                    <label>ÎπÑÎ∞ÄÎ≤àÌò∏</label>
                    <input type="password" id="auth-password" placeholder="6ÏûêÎ¶¨ Ïù¥ÏÉÅ ÏûÖÎ†•">
                </div>
                <div class="auth-buttons" style="display: flex; gap: 10px;">
                    <button id="btn-login" class="primary-btn" style="flex:1">Î°úÍ∑∏Ïù∏</button>
                    <button id="btn-signup" class="secondary-btn" style="flex:1">ÌöåÏõêÍ∞ÄÏûÖ</button>
                </div>
            </div>
            <p id="auth-msg" style="margin-top: 15px; font-size: 0.85rem; color: var(--text-light);"></p>
        </div>
    </div>

    <!-- Account Day Details Modal -->
    <div id="acc-day-modal" class="modal-backdrop">
        <div class="modal-content card">
            <div class="modal-header">
                <h4 id="acc-day-title">ÎÇ†ÏßúÎ≥Ñ ÏÉÅÏÑ∏ ÎÇ¥Ïó≠</h4>
                <button class="close-modal"
                    onclick="document.getElementById('acc-day-modal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h5 class="section-title">üí∞ ÏÉÅÏÑ∏ ÎÇ¥Ïó≠</h5>
                    <div id="acc-day-list" class="detailed-entry-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Life Day Details Modal -->
    <div id="life-day-modal" class="modal-backdrop">
        <div class="modal-content card">
            <div class="modal-header">
                <h4 id="life-day-title">ÎÇ†ÏßúÎ≥Ñ ÏÉÅÏÑ∏ ÎÇ¥Ïö©</h4>
                <button class="close-modal"
                    onclick="document.getElementById('life-day-modal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h5 class="section-title">üìå Ïù¥Î≤àÎã¨ Ïù¥Ïäà</h5>
                    <div id="life-day-issue-list" class="detailed-entry-list"></div>
                </div>
                <div class="modal-section mt-4">
                    <h5 class="section-title">üìù ÏÉùÌôú Í∏∞Î°ù</h5>
                    <div id="life-day-log-list" class="detailed-entry-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="main.js"></script>
</body>

</html>